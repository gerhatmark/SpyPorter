<!DOCTYPE html>
<html lang="hu">

<head>
    <title>Spyporter Társasjáték</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/foundation.min.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>

<body>
    <div class="navigation">
        <nav>
            <div class="logo"><img src="/assets/icons/logo.png" alt="SpyPorter logo" /></div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="asd">Rules</a></li>
                <li><a href="asd">Advanced</a></li>
                <li><a href="asd">How It's made</a></li>
            </ul>
        </nav>
        <input type="checkbox" id="asd" />
        <div class="pagewrap">
            <label for="asd">☰ </label>
            <img src="/assets/icons/logo.png" alt="SpyPorter logo" class="mobilenav" />

            <div class="offcanvas">
                <ul class="off">
                    <li class="off"><a href="asd">Home</a></li>
                    <li class="off"><a href="asd">Rules</a></li>
                    <li class="off"><a href="asd">Advanced</a></li>
                    <li class="off"><a href="asd">How It's made</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="payment">
        <div class="hiba">
            <h2>Due to a known bug from PayPal, if the payment window disappear please refresh the site, and try again!</h2>
        </div>


        <div class="row">
            <div class="small-12 columns text-center">
                <div id="paypal-button-container" class="paybtn"></div>
                <h6>Quantity:</h6>

                <input type="radio" id="qty1" name="qty" value="1" onchange="ellenorzes()" checked> 1
                <input type="radio" id="qty2" name="qty" value="2" onchange="ellenorzes()"> 2
                <input type="radio" id="qty3" name="qty" value="3" onchange="ellenorzes()"> 3
            </div>
        </div>
    </div>
    <footer>
        <div class="row">
            <div class="small-12 columns text-center">
                <p>2017. Spyporter - Gabor Krebsz, Burggraben 12. 82418 Murnau a. Staffelsee - Deutschland</p>
            </div>
        </div>

        <div class="row">
            <div class="small-4 columns text-center"><img src="/assets/icons/fb.png" alt="fb"></div>
            <div class="small-4 columns text-center"><img src="/assets/icons/youtube.png" alt="yt"></div>
            <div class="small-4 columns text-center"><img src="/assets/icons/twitter.png" alt="tw"></div>

        </div>

    </footer>



    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
    <script src="js/vendor/jquery.js"></script>

    <script>
        //do work


        var price = 2000;
        var total_price = null;
        var currency = "HUF";
        var name = "SpyPorter Board Game";
        var qty = document.getElementById('qty1').value;

        function ellenorzes() {

            if (document.getElementById('qty1').checked) {
                qty = document.getElementById('qty1').value;
                console.log(qty);

            } else if (document.getElementById('qty2').checked) {
                qty = document.getElementById('qty2').value;
                console.log(qty);

            } else {
                qty = document.getElementById('qty3').value;
                console.log(qty);

            }
        }





        // Render the PayPal button


        paypal.Button.render({


            // Set your environment

            env: 'sandbox', // sandbox | production

            // PayPal Client IDs - replace with your own
            // Create a PayPal app: https://developer.paypal.com/developer/applications/create

            client: {
                sandbox: 'AbOALK2CzT6HSFNMUECudG9lay_ZQn9MALqT5zxW5CyQJl5NpgCN93-Woxq1yYIODa1zIEnj_Lfjwoy8'
            },


            // Set to 'Pay Now'

            commit: true,

            // Wait for the PayPal button to be clicked

            payment: function(actions) {


                total_price = price * qty;
                // Make a client-side call to the REST api to create the payment






                console.log("Ár: " + price)
                console.log("Mennyiség: " + qty)
                console.log("Végleges ár: " + total_price)
                console.log("Pénznem" + currency)



                return actions.payment.create({

                    transactions: [{

                        amount: {
                            total: total_price,
                            currency: currency



                        },

                        item_list: {
                            items: [{
                                quantity: qty,
                                name: name,
                                price: price,
                                currency: currency
                            }]

                        }




                    }]



                });


            },


            // Wait for the payment to be authorized by the customer

            onAuthorize: function(data, actions) {

                // Execute the payment

                return actions.payment.execute().then(function() {


                    window.location.replace("http://192.168.39.106:7879/purchased.html");



                });
            },

            onCancel: function(data, actions) {
                window.location.replace("http://192.168.39.106:7879/canceled.html");
            }










        }, '#paypal-button-container');
    </script>
    <script src="js/vendor/what-input.js"></script>

    <script src="js/vendor/foundation.js"></script>
</body>

</html>